Version 4
SHEET 1 1496 680
WIRE -208 80 -304 80
WIRE -96 80 -144 80
WIRE -304 160 -304 80
WIRE -304 160 -432 160
WIRE -256 160 -304 160
WIRE -224 160 -256 160
WIRE -432 176 -432 160
WIRE -304 192 -304 160
WIRE -224 192 -224 160
WIRE -192 192 -224 192
WIRE -96 208 -96 80
WIRE -96 208 -128 208
WIRE -32 208 -96 208
WIRE 32 208 -32 208
WIRE 128 208 96 208
WIRE 160 208 128 208
WIRE 240 208 160 208
WIRE -192 224 -224 224
WIRE 128 224 128 208
WIRE 352 224 304 224
WIRE 464 224 432 224
WIRE 576 224 464 224
WIRE 240 240 208 240
WIRE 688 240 640 240
WIRE 800 240 768 240
WIRE 896 240 800 240
WIRE 464 256 464 224
WIRE 576 256 544 256
WIRE 1008 256 960 256
WIRE 1120 256 1088 256
WIRE 1168 256 1120 256
WIRE -432 272 -432 256
WIRE -304 272 -304 256
WIRE -304 272 -432 272
WIRE -224 272 -224 224
WIRE 800 272 800 240
WIRE 896 272 864 272
WIRE 1280 272 1232 272
WIRE 1392 272 1360 272
WIRE 1440 272 1392 272
WIRE 208 288 208 240
WIRE 1120 288 1120 256
WIRE 1168 288 1136 288
WIRE -432 304 -432 272
WIRE 544 304 544 256
WIRE 1392 304 1392 272
WIRE 864 320 864 272
WIRE 128 336 128 304
WIRE 1136 336 1136 288
WIRE 464 352 464 320
WIRE 800 368 800 336
WIRE 1120 384 1120 352
WIRE 1392 400 1392 368
WIRE -272 432 -272 416
WIRE -432 448 -432 416
WIRE -272 464 -272 432
WIRE -432 480 -432 448
WIRE -432 592 -432 544
WIRE -272 592 -272 560
FLAG -432 304 0
FLAG -272 592 0
FLAG -432 592 0
FLAG -224 272 vnp
FLAG -272 432 vnp
FLAG -432 448 vnn
FLAG -256 160 vnn
FLAG 128 336 0
FLAG 208 288 0
FLAG 464 352 0
FLAG -32 208 out1
FLAG 160 208 out2
FLAG 544 304 0
FLAG 800 368 0
FLAG 864 320 0
FLAG 1120 384 0
FLAG 1136 336 0
FLAG 1392 400 0
FLAG 1440 272 out
SYMBOL cap -320 192 R0
WINDOW 3 24 36 Left 2
SYMATTR Value {Ci}
SYMATTR InstName Ci1
SYMBOL cap -144 64 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName Cf1
SYMATTR Value 1p
SYMBOL Opamps\\opamp -160 144 R0
SYMATTR InstName U1
SYMATTR SpiceLine Aol={Aol_OPA}
SYMATTR SpiceLine2 GBW={GBW_OPA}
SYMBOL current -432 176 R0
WINDOW 0 33 17 Left 2
WINDOW 123 -27 191 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -33 167 Left 2
SYMATTR InstName Idet1
SYMATTR Value2 AC 1
SYMATTR Value PULSE(0 {Qdet/Ton} 20u {1e-4*Ton} {1e-4*Ton} {Ton})
SYMBOL vnoise -272 512 R0
WINDOW 39 0 0 Left 2
SYMATTR SpiceLine R={Rn}
SYMATTR InstName X1
SYMBOL inoise -432 512 R0
WINDOW 39 0 0 Left 2
SYMATTR SpiceLine R={Rn}
SYMATTR InstName X2
SYMBOL Opamps\\opamp 272 288 M180
SYMATTR InstName U2
SYMATTR SpiceLine Aol=1
SYMATTR SpiceLine2 GBW=10G
SYMBOL cap 96 192 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value {Cs}
SYMBOL cap 480 320 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C2
SYMATTR Value {Cs}
SYMBOL res 112 208 R0
SYMATTR InstName R1
SYMATTR Value {Rs}
SYMBOL res 448 208 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value {Rs}
SYMBOL Opamps\\opamp 608 304 M180
SYMATTR InstName U3
SYMATTR SpiceLine Aol=1
SYMATTR SpiceLine2 GBW=10G
SYMBOL cap 816 336 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C3
SYMATTR Value {Cs}
SYMBOL res 784 224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value {Rs}
SYMBOL Opamps\\opamp 928 320 M180
SYMATTR InstName U4
SYMATTR SpiceLine Aol=1
SYMATTR SpiceLine2 GBW=10G
SYMBOL cap 1136 352 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C4
SYMATTR Value {Cs}
SYMBOL res 1104 240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value {Rs}
SYMBOL Opamps\\opamp 1200 336 M180
SYMATTR InstName U5
SYMATTR SpiceLine Aol=1
SYMATTR SpiceLine2 GBW=10G
SYMBOL cap 1408 368 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C5
SYMATTR Value {Cs}
SYMBOL res 1376 256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value {Rs}
TEXT -472 -216 Left 2 !.param Qdet=1p Ton=1n
TEXT -472 -56 Left 2 !.param Aol_OPA=1e5 GBW_OPA={Aol_OPA*1e20}
TEXT 160 56 Left 2 !;.tran 50u
TEXT 168 -216 Left 2 !.lib opamp.sub
TEXT -472 -176 Left 2 !.param Ci=99p
TEXT -472 -256 Left 2 ;Detector signal parameters.
TEXT 168 -248 Left 2 ;include the subcircuit for amplifier
TEXT 160 24 Left 2 !;.ac dec 10 1 1G
TEXT 160 -16 Left 2 ;Simulation and measurements
TEXT -464 -120 Left 2 ;Amplifier parameters
TEXT -464 -88 Left 2 ;open loop band width is set to 1e20 Hz
TEXT 160 88 Left 2 !.noise V(out) Idet1 dec 100 1 1G
TEXT -224 576 Left 2 !.param Rn=10k
TEXT 240 272 Left 2 ;buffer
TEXT 168 -160 Left 2 ;parameters for the shaping time
TEXT 176 -96 Left 2 !.param Cs = 100p\n.param Rs={ts/Cs}
TEXT 136 496 Left 2 !.MEAS NOISE vno INTEG V(onoise)
TEXT 184 -128 Left 2 !.param ts=0.38u
TEXT 136 544 Left 2 !.meas TRAN Vm MAX V(out)
TEXT 136 576 Left 2 !.meas TRAN tm FIND V(out) WHEN V(out)=Vm
TEXT 136 608 Left 2 !.meas TRAN tw FIND V(out) WHEN V(out)=0.01*Vm fall=1
TEXT 576 288 Left 2 ;buffer
TEXT 896 304 Left 2 ;buffer
TEXT 1168 320 Left 2 ;buffer
