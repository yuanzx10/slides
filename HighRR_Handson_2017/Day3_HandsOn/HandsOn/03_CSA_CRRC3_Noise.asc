Version 4
SHEET 1 1496 680
WIRE -208 80 -304 80
WIRE -96 80 -144 80
WIRE -304 160 -304 80
WIRE -304 160 -432 160
WIRE -256 160 -304 160
WIRE -224 160 -256 160
WIRE -432 176 -432 160
WIRE -304 192 -304 160
WIRE -224 192 -224 160
WIRE -192 192 -224 192
WIRE -96 208 -96 80
WIRE -96 208 -128 208
WIRE -32 208 -96 208
WIRE 32 208 -32 208
WIRE 128 208 96 208
WIRE 160 208 128 208
WIRE 240 208 160 208
WIRE -192 224 -224 224
WIRE 128 224 128 208
WIRE 352 224 304 224
WIRE 464 224 432 224
WIRE 240 240 208 240
WIRE 464 256 464 224
WIRE -432 272 -432 256
WIRE -304 272 -304 256
WIRE -304 272 -432 272
WIRE -224 272 -224 224
WIRE 208 288 208 240
WIRE -432 304 -432 272
WIRE 128 336 128 304
WIRE 464 352 464 320
WIRE -272 432 -272 416
WIRE -432 448 -432 416
WIRE -272 464 -272 432
WIRE -432 480 -432 448
WIRE -432 592 -432 544
WIRE -272 592 -272 560
FLAG -432 304 0
FLAG -272 592 0
FLAG -432 592 0
FLAG -224 272 vnp
FLAG -272 432 vnp
FLAG -432 448 vnn
FLAG -256 160 vnn
FLAG 128 336 0
FLAG 208 288 0
FLAG 464 352 0
FLAG -32 208 out1
FLAG 160 208 out2
SYMBOL cap -320 192 R0
WINDOW 3 24 36 Left 2
SYMATTR Value {Ci}
SYMATTR InstName Ci1
SYMBOL cap -144 64 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName Cf1
SYMATTR Value 1p
SYMBOL Opamps\\opamp -160 144 R0
SYMATTR InstName U1
SYMATTR SpiceLine Aol={Aol_OPA}
SYMATTR SpiceLine2 GBW={GBW_OPA}
SYMBOL current -432 176 R0
WINDOW 0 33 17 Left 2
WINDOW 123 -27 191 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -33 167 Left 2
SYMATTR InstName Idet1
SYMATTR Value2 AC 1
SYMATTR Value PULSE(0 {Qdet/Ton} 20u {1e-4*Ton} {1e-4*Ton} {Ton})
SYMBOL vnoise -272 512 R0
WINDOW 39 0 0 Left 2
SYMATTR SpiceLine R={Rn}
SYMATTR InstName X1
SYMBOL inoise -432 512 R0
WINDOW 39 0 0 Left 2
SYMATTR SpiceLine R={Rn}
SYMATTR InstName X2
SYMBOL Opamps\\opamp 272 288 M180
SYMATTR InstName U2
SYMATTR SpiceLine Aol=1
SYMATTR SpiceLine2 GBW=10G
SYMBOL cap 96 192 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value {Cs}
SYMBOL cap 480 320 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C2
SYMATTR Value {Cs}
SYMBOL res 112 208 R0
SYMATTR InstName R1
SYMATTR Value {Rs}
SYMBOL res 448 208 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value {Rs}
TEXT -472 -216 Left 2 !.param Qdet=1p Ton=1n
TEXT -472 -56 Left 2 !.param Aol_OPA=1e5 GBW_OPA={Aol_OPA*1e20}
TEXT 160 56 Left 2 !;.tran 50u
TEXT 168 -216 Left 2 !.lib opamp.sub
TEXT -472 -176 Left 2 !.param Ci=99p
TEXT -472 -256 Left 2 ;Detector signal parameters.
TEXT 168 -248 Left 2 ;include the subcircuit for amplifier
TEXT 160 24 Left 2 !;.ac dec 10 1 1G
TEXT 160 -16 Left 2 ;Simulation and measurements
TEXT -464 -120 Left 2 ;Amplifier parameters
TEXT -464 -88 Left 2 ;open loop band width is set to 1e20 Hz
TEXT 160 88 Left 2 !.noise V(out) Idet1 dec 100 1 1G
TEXT -224 576 Left 2 !.param Rn=10k
TEXT 240 272 Left 2 ;buffer
TEXT 168 -160 Left 2 ;parameters for the shaping time
TEXT 176 -96 Left 2 !.param Cs = 100p\n.param Rs={ts/Cs}
TEXT 184 -128 Left 2 !.param ts=1u
