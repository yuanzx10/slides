Version 4
SHEET 1 968 680
WIRE -16 -32 -112 -32
WIRE 96 -32 48 -32
WIRE -112 48 -112 -32
WIRE -112 48 -240 48
WIRE -64 48 -112 48
WIRE -32 48 -64 48
WIRE -240 64 -240 48
WIRE -112 80 -112 48
WIRE -32 80 -32 48
WIRE 0 80 -32 80
WIRE 96 96 96 -32
WIRE 96 96 64 96
WIRE 160 96 96 96
WIRE 224 96 160 96
WIRE 320 96 288 96
WIRE 352 96 320 96
WIRE 432 96 352 96
WIRE 0 112 -32 112
WIRE 320 112 320 96
WIRE 544 112 496 112
WIRE 656 112 624 112
WIRE 704 112 656 112
WIRE 432 128 400 128
WIRE 656 144 656 112
WIRE -240 160 -240 144
WIRE -112 160 -112 144
WIRE -112 160 -240 160
WIRE -32 160 -32 112
WIRE 400 176 400 128
WIRE -240 192 -240 160
WIRE 320 224 320 192
WIRE 656 240 656 208
WIRE -80 320 -80 304
WIRE -240 336 -240 304
WIRE -80 352 -80 320
WIRE -240 368 -240 336
WIRE -240 480 -240 432
WIRE -80 480 -80 448
FLAG -240 192 0
FLAG -80 480 0
FLAG -240 480 0
FLAG -32 160 vnp
FLAG -80 320 vnp
FLAG -240 336 vnn
FLAG -64 48 vnn
FLAG 320 224 0
FLAG 400 176 0
FLAG 656 240 0
FLAG 160 96 out1
FLAG 352 96 out2
FLAG 704 112 out
SYMBOL cap -128 80 R0
WINDOW 3 24 36 Left 2
SYMATTR Value {Ci}
SYMATTR InstName Ci1
SYMBOL cap 48 -48 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName Cf1
SYMATTR Value 1p
SYMBOL Opamps\\opamp 32 32 R0
SYMATTR InstName U1
SYMATTR SpiceLine Aol={Aol_OPA}
SYMATTR SpiceLine2 GBW={GBW_OPA}
SYMBOL current -240 64 R0
WINDOW 0 33 17 Left 2
WINDOW 123 -27 191 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -33 167 Left 2
SYMATTR InstName Idet1
SYMATTR Value2 AC 1
SYMATTR Value PULSE(0 {Qdet/Ton} 20u {1e-4*Ton} {1e-4*Ton} {Ton})
SYMBOL vnoise -80 400 R0
WINDOW 39 0 0 Left 2
SYMATTR SpiceLine R={Rn}
SYMATTR InstName X1
SYMBOL inoise -240 400 R0
WINDOW 39 0 0 Left 2
SYMATTR SpiceLine R={Rn}
SYMATTR InstName X2
SYMBOL Opamps\\opamp 464 176 M180
SYMATTR InstName U2
SYMATTR SpiceLine Aol=1
SYMATTR SpiceLine2 GBW=10G
SYMBOL cap 288 80 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value {Cs}
SYMBOL cap 672 208 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C2
SYMATTR Value {Cs}
SYMBOL res 304 96 R0
SYMATTR InstName R1
SYMATTR Value {Rs}
SYMBOL res 640 96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value {Rs}
TEXT -280 -328 Left 2 !.param Qdet=1p Ton=1n
TEXT -280 -168 Left 2 !.param Aol_OPA=1e5 GBW_OPA={Aol_OPA*1e20}
TEXT 352 -56 Left 2 !.tran 50u
TEXT 360 -328 Left 2 !.lib opamp.sub
TEXT -280 -288 Left 2 !.param Ci=99p
TEXT -280 -368 Left 2 ;Detector signal parameters.
TEXT 360 -360 Left 2 ;include the subcircuit for amplifier
TEXT 352 -88 Left 2 !;.ac dec 10 1 1G
TEXT 352 -128 Left 2 ;Simulation and measurements
TEXT -272 -232 Left 2 ;Amplifier parameters
TEXT -272 -200 Left 2 ;open loop band width is set to 1e20 Hz
TEXT 352 -24 Left 2 !;.noise V(out) Idet1 dec 100 1 1G
TEXT -32 464 Left 2 !.param Rn=10k
TEXT 432 160 Left 2 ;buffer
TEXT 360 -272 Left 2 ;parameters for the shaping time
TEXT 368 -208 Left 2 !.param Cs = 100p\n.param Rs={ts/Cs}
TEXT 328 384 Left 2 !;.MEAS NOISE vno INTEG V(onoise)
TEXT 376 -240 Left 2 !.param ts=1u
TEXT 328 432 Left 2 !.meas TRAN Vm MAX V(out)
TEXT 328 464 Left 2 !.meas TRAN tm FIND V(out) WHEN V(out)=Vm
TEXT 328 496 Left 2 !.meas TRAN tw FIND V(out) WHEN V(out)=0.01*Vm fall=1
